<!DOCTYPE html>
<html>
<head>
    <title>Scrolling Visualization Project</title>
    <style>
        html {
            scroll-behavior: smooth;
        }
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        .page {
            min-height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            /* Below line for separate background color for each page - optional */
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }
        .page#page1 {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            padding-top: 20px; /* Add some padding to not stick the title on the very top */
            padding-left: 50px; /* Add some padding to not stick the title on the very top */
            padding-right: 50px; /* Add some padding to not stick the title on the very top */
            padding-bottom: 20px; /* Add some padding to not stick the title on the very top */

        }

        .page#page6 {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            padding-top: 20px; /* Add some padding to not stick the title on the very top */
            padding-left: 50px; /* Add some padding to not stick the title on the very top */
            padding-right: 50px; /* Add some padding to not stick the title on the very top */
            padding-bottom: 20px; /* Add some padding to not stick the title on the very top */
            overflow: auto;

        }
        .upper {
            height: 33vh;
            display: flex;
        }
        .lower {
            height: 67vh;
            overflow: auto;
        }
        .left {
            width: 50%;
        }
        .right {
            width: 50%;
        }


        h1 {
            font-size: 5em;
        }
      
        #scroll-nav {
            position: fixed;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #scroll-nav a {
            display: block;
            height: 15px;
            width: 15px;
            border-radius: 50%;
            background-color: #ccc;
            margin: 10px 0;
            text-decoration: none;  /* to remove underline */
        }

        #scroll-nav a.active {
            background-color: #333;
        }
    </style>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <script src="https://d3js.org/d3.v6.min.js"></script>


</head>
<body>
    <div id="scroll-nav">
        <a href="#page1"></a>
        <a href="#page2"></a>
        <a href="#page3"></a>
        <a href="#page4"></a>
        <a href="#page5"></a>
        <a href="#page6"></a>
    </div>
    <div class="page" id="page1">
        <h1>Data Science Insight</h1>
            <div class="content">
                <p> <strong> Welcome </strong> to our data-centric platform, designed to empower professionals and enthusiasts in the field of data science</p>
                <p>We aim is to provide you with comprehensive insights into the landscape of data jobs across various states, industries, and roles. You'll find invaluable information on <strong> job availability, salary ranges, high-demand titles, and required skills</strong>, all meticulously compiled and analyzed </p>
                <p>We don't just stop at providing insights. Our platform also hosts an interactive tool tailored to your specific interests. With this, you can input your desired occupation and state to receive a customized report detailing job positions, average salaries, and requisite skills in your selected field. We've combined data and technology to give you a clear and actionable roadmap for your career journey. Welcome to your data-driven future</p>
                <h2>What You Will Find</h2>
                <ul>
                    <li><strong>Page 2:</strong> </li>
                    <li><strong>Page 3:</strong> </li>
                    <li><strong>Page 4:</strong> </li>
                    <li><strong>Page 5:</strong> </li>
                    <li><strong>Page 6:</strong> </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="page" id="page2">
        <h1>Page 2</h1>
        <!-- Add your visualization here -->
    </div>
    <div class="page" id="page3">
        <h1>Page 3</h1>
        <!-- Add your visualization here -->
    </div>
    <div class="page" id="page4">
        <h1>Page 4</h1>
        <!-- Add your visualization here -->
    </div>
    <div class="page" id="page5">
        <h1>Page 5</h1>
        <!-- Add your visualization here -->
    </div>
    <div class="page" id="page6">
        <div class="upper">
            <div class="left">
                <h1>Job Finder</h1>
                <h2>About the Tool</h2>
                <p>Welcome to our Job Finder page, your go-to tool for personalized job searching. 
                    By simply inputting your desired <strong>Occupation</strong> and <strong>Job Location</strong>, you'll access a comprehensive table of opportunities tailored just for you. 
                    Results will include Job Title, Company Name, Average Yearly Salary($K), Industry, and Required Skills for each listing. 
                    Whether you're seeking a general role or a specialized position, whether you're open to relocation or not, our Job Finder tool pulls from an extensive dataset to provide a rich variety of options. 
                    Discover your next career move with us.</p>
            </div>
            <div class="right">
                <div id="form-container">
                    <form>
                        <label for="Occupation">Occupation:</label>
                        <select id="Occupation">
                            <option value="Data_Engineer">Data Engineer</option>
                            <option value="Data_Scientist">Data Scientist</option>
                            <option value="Data_Analyst">Analyst</option>
                            <option value="Data_Modeler">Data Modeler</option>
                            <option value="Project_Manager">Project Manager</option>
                            <option value="MachineLearning_Engineer">Machine Learning Engineer</option>
                            <option value="Director">Director</option>
                            <option value="Other_Scientist">Other Scientist</option>
                            <option value="Other">Other</option>
                        </select>
                        <label for="JobLocation">Job Location:</label>
                        <select id="JobLocation">
                            <option value="AL">Alabama (AL)</option>
                            <option value="AK">Alaska (AK)</option>
                            <option value="AZ">Arizona (AZ)</option>
                            <option value="AR">Arkansas (AR)</option>
                            <option value="CA">California (CA)</option>
                            <option value="CO">Colorado (CO)</option>
                            <option value="CT">Connecticut (CT)</option>
                            <option value="DE">Delaware (DE)</option>
                            <option value="FL">Florida (FL)</option>
                            <option value="GA">Georgia (GA)</option>
                            <option value="HI">Hawaii (HI)</option>
                            <option value="ID">Idaho (ID)</option>
                            <option value="IL">Illinois (IL)</option>
                            <option value="IN">Indiana (IN)</option>
                            <option value="IA">Iowa (IA)</option>
                            <option value="KS">Kansas (KS)</option>
                            <option value="KY">Kentucky (KY)</option>
                            <option value="LA">Louisiana (LA)</option>
                            <option value="ME">Maine (ME)</option>
                            <option value="MD">Maryland (MD)</option>
                            <option value="MA">Massachusetts (MA)</option>
                            <option value="MI">Michigan (MI)</option>
                            <option value="MN">Minnesota (MN)</option>
                            <option value="MS">Mississippi (MS)</option>
                            <option value="MO">Missouri (MO)</option>
                            <option value="MT">Montana (MT)</option>
                            <option value="NE">Nebraska (NE)</option>
                            <option value="NV">Nevada (NV)</option>
                            <option value="NH">New Hampshire (NH)</option>
                            <option value="NJ">New Jersey (NJ)</option>
                            <option value="NM">New Mexico (NM)</option>
                            <option value="NY">New York (NY)</option>
                            <option value="NC">North Carolina (NC)</option>
                            <option value="ND">North Dakota (ND)</option>
                            <option value="OH">Ohio (OH)</option>
                            <option value="OK">Oklahoma (OK)</option>
                            <option value="OR">Oregon (OR)</option>
                            <option value="PA">Pennsylvania (PA)</option>
                            <option value="RI">Rhode Island (RI)</option>
                            <option value="SC">South Carolina (SC)</option>
                            <option value="SD">South Dakota (SD)</option>
                            <option value="TN">Tennessee (TN)</option>
                            <option value="TX">Texas (TX)</option>
                            <option value="UT">Utah (UT)</option>
                            <option value="VT">Vermont (VT)</option>
                            <option value="VA">Virginia (VA)</option>
                            <option value="WA">Washington (WA)</option>
                            <option value="WV">West Virginia (WV)</option>
                            <option value="WI">Wisconsin (WI)</option>
                            <option value="WY">Wyoming (WY)</option>
                        </select>                            
                        <button id="submit-button" type="button" onclick="findJobs()">Find Jobs</button>
                    </form>
                </div>
            </div>
        <div class="lower">
            <div id="results-container">
                <table id="jobsTable"></table>
            </div>
        </div>
    </div>
    
    
    <script>
        d3.csv("modified_cleaned_data_2021.csv").then(function(data) {
            console.log("Raw CSV data:", data);
            
            var allJobs = data.map(function(d) {
                return {
                    'Occupation': d.Occupation,
                    'JobLocation': d.JobLocation
                };
            });

            console.log("Mapped jobs data:", allJobs);

            var filteredJobs = allJobs.filter(function(job) {
                return job['Occupation'] === occupation && job['JobLocation']==JobLocation;
            });

            console.log("Filtered jobs data:", filteredJobs);

            var columns = ["Occupation"];

            var table = d3.select("#jobsTable");
            table.selectAll("thead").remove();
            table.selectAll("tbody").remove();

            var thead = table.append("thead");
            var tbody = table.append("tbody");

            thead.append("tr")
                .selectAll("th")
                .data(columns)
                .enter()
                .append("th")
                .text(function(column) { return column; });

            var rows = tbody.selectAll("tr")
                .data(filteredJobs)
                .enter()
                .append("tr");

            var cells = rows.selectAll("td")
                .data(function(row) {
                    return columns.map(function(column) {
                        return {column: column, value: row[column]};
                    });
                })
                .enter()
                .append("td")
                .text(function(d) { return d.value; });
        });



        function createTable(jobs) {
            var table = document.createElement('table');
            table.id = "jobsTable";
            var thead = document.createElement('thead');
            var headerRow = document.createElement('tr');

            ['Occupation'].forEach(header => {
                var th = document.createElement('th');
                th.textContent = header;
                headerRow.appendChild(th);
            });

            thead.appendChild(headerRow);
            table.appendChild(thead);

            var tbody = document.createElement('tbody');

            jobs.forEach(job => {
                var row = document.createElement('tr');
                ['Occupation'].forEach(key => {
                var td = document.createElement('td');
                td.textContent = key === 'Avg Salary(K)' ? job[key].toString() : job[key];
                row.appendChild(td);
                });
                tbody.appendChild(row);
            });

            table.appendChild(tbody);
            return table;
        }


        function findJobs() {
            var occupation = document.getElementById('Occupation').value;
            var jobLocation = document.getElementById("JobLocation").value;

            Papa.parse('modified_cleaned_data_2021.csv', {
                download: true,
                header: true,
                complete: function(results) {
                    var allJobs = results.data;

                    var filteredJobs = allJobs.filter(function(job) {
                        return job['Occupation'] === occupation && job['JobLocation']===jobLocation;
                    });

                    var columns = ['Job Title','Company Name', 'Avg Salary(K)', 'Industry','RequiredSkills'];

                    var table = document.createElement('table');
                    table.id = "jobsTable";
                    var thead = document.createElement('thead');
                    var headerRow = document.createElement('tr');

                    columns.forEach(header => {
                        var th = document.createElement('th');
                        th.textContent = header;
                        headerRow.appendChild(th);
                    });

                    thead.appendChild(headerRow);
                    table.appendChild(thead);

                    var tbody = document.createElement('tbody');

                    filteredJobs.forEach(job => {
                        var row = document.createElement('tr');
                        columns.forEach(key => {
                            var td = document.createElement('td');
                            td.textContent = job[key];
                            row.appendChild(td);
                        });
                        tbody.appendChild(row);
                    });

                    table.appendChild(tbody);

                    var resultsContainer = document.getElementById('results-container');
                    resultsContainer.innerHTML = "";
                    resultsContainer.appendChild(table);
                }
            });
        }

        // Call updateSliderValue when the page is loaded.
        window.onload = function() {
            updateSliderValue();
        }

        $(document).ready(function() {
            $(window).on('scroll', function() {
                $('.page').each(function() {
                    if($(window).scrollTop() >= $(this).offset().top) {
                        var id = $(this).attr('id');
                        $('#scroll-nav a').removeClass('active');
                        $('#scroll-nav a[href="#'+ id +'"]').addClass('active');
                    }
                });
            });

            $('#scroll-nav a').on('click', function(event) {
                event.preventDefault();

                var target = this.getAttribute('href');

                $('html, body').animate({
                    scrollTop: $(target).offset().top
                }, 500); // The number here represents the speed of the scrolling animation in milliseconds (500 ms = 0.5 seconds)
            });
        });
    </script>
</body>
</html>
